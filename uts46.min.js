!function(t,n){"function"==typeof define&&define.amd?define(["punycode","./idna-map.min"],(function(t,e){return n(t,e)})):"object"==typeof exports?module.exports=n(require("punycode/"),require("./idna-map.min")):t.uts46=n(t.punycode,t.idna_map)}(this,(function(t,n){function e(e,r,i){const o=[],a=t.ucs2.decode(e);for(let e=0;e<a.length;e++){const s=a[e],c=t.ucs2.encode([a[e]]),u=n.mapChar(s),l=u>>23,d=u>>21&3,h=u>>5&65535,f=31&u,p=n.mapStr.substr(h,f);if(0===d||r&&1&l)throw new Error("Illegal char "+c);1===d?o.push(p):2===d?o.push(i?p:c):3===d&&o.push(c)}return o.join("").normalize("NFC")}function r(n,r,o){void 0===o&&(o=!1);let a=e(n,o,r).split(".");return a=a.map((function(n){return n.startsWith("xn--")?i(n=t.decode(n.substring(4)),o,!1):i(n,o,r),n})),a.join(".")}function i(t,r,i){if("-"===t[2]&&"-"===t[3])throw new Error("Failed to validate "+t);if(t.startsWith("-")||t.endsWith("-"))throw new Error("Failed to validate "+t);if(t.includes("."))throw new Error("Failed to validate "+t);if(e(t,r,i)!==t)throw new Error("Failed to validate "+t);const o=t.codePointAt(0);if(n.mapChar(o)&2<<23)throw new Error("Label contains illegal character: "+o)}function o(n,e){void 0===e&&(e={});const i=!("transitional"in e)||e.transitional,o="useStd3ASCII"in e&&e.useStd3ASCII,a="verifyDnsLength"in e&&e.verifyDnsLength,s=r(n,i,o).split(".").map(t.toASCII),c=s.join(".");let u;if(a){if(c.length<1||c.length>253)throw new Error("DNS name has wrong length: "+c);for(u=0;u<s.length;u++){const t=s[u];if(t.length<1||t.length>63)throw new Error("DNS label has wrong length: "+t)}}return c}function a(t,n){void 0===n&&(n={});return r(t,!1,"useStd3ASCII"in n&&n.useStd3ASCII)}return{toUnicode:a,toAscii:o,convert:function(t){const n=Array.isArray(t);n||(t=[t]);const e={IDN:[],PC:[]};return t.forEach((t=>{let n,r;try{n=o(t,{transitional:!t.match(/\.(?:be|ca|de|fr|pm|re|swiss|tf|wf|yt)\.?$/)}),r={PC:n,IDN:a(n)}}catch(n){r={PC:t,IDN:t}}e.PC.push(r.PC),e.IDN.push(r.IDN)})),n?e:{IDN:e.IDN[0],PC:e.PC[0]}}}}));